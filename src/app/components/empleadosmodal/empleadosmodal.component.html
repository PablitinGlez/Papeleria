<div class="modal">
  <div class="modal-content">
    <div class="title-modal">
      <h2>Crear Empleado</h2>
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" />
        <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
      </svg>
    </div>
    
    <form [formGroup]="empleadoForm" (ngSubmit)="guardarEmpleado()">
      <!-- Fila de Nombre y Apellidos -->
      <div class="input-row">
        <div class="input-wrapper">
          <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25">
            <path d="M3 17c3.333 -3.333 5 -6 5 -8c0 -3 -1 -3 -2 -3s-2.032 1.085 -2 3c.034 2.048 1.658 4.877 2.5 6c1.5 2 2.5 2.5 3.5 1l2 -3c.333 2.667 1.333 4 3 4c.53 0 2.639 -2 3 -2c.517 0 1.517 .667 3 2"></path>
          </svg>
          <input 
            placeholder="Nombre" 
            class="form-input" 
            type="text" 
            formControlName="nombre"
            [class.invalid]="nombreInvalid"
          />
          <div *ngIf="nombreInvalid" class="error-message">
            {{ getErrorMessage('nombre') }}
          </div>
        </div>

        <div class="input-wrapper">
           <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25">
            <path d="M3 17c3.333 -3.333 5 -6 5 -8c0 -3 -1 -3 -2 -3s-2.032 1.085 -2 3c.034 2.048 1.658 4.877 2.5 6c1.5 2 2.5 2.5 3.5 1l2 -3c.333 2.667 1.333 4 3 4c.53 0 2.639 -2 3 -2c.517 0 1.517 .667 3 2"></path>
          </svg>
          <input 
            placeholder="Apellidos" 
            class="form-input" 
            type="text" 
            formControlName="apellidos"
            [class.invalid]="apellidosInvalid"
          />
          <div *ngIf="apellidosInvalid" class="error-message">
            {{ getErrorMessage('apellidos') }}
          </div>
        </div>

         <div class="input-wrapper">
          <svg fill="none" viewBox="0 0 24 24" class="input-icon">
            <path stroke-width="1.5" stroke="currentColor" d="M3 8L10.8906 13.2604C11.5624 13.7083 12.4376 13.7083 13.1094 13.2604L21 8M5 19H19C20.1046 19 21 18.1046 21 17V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V17C3 18.1046 3.89543 19 5 19Z"></path>
          </svg>
          <input 
            placeholder="Correo Electrónico" 
            class="form-input" 
            type="email" 
            formControlName="correo"
            [class.invalid]="correoInvalid"
          />
          <div *ngIf="correoInvalid" class="error-message">
            {{ getErrorMessage('correo') }}
          </div>
        </div>
      </div>

      <!-- Fila de Teléfono, Puesto y CURP -->
      <div class="input-row">
        <div class="input-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25" class="input-icon">
            <path d="M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2"></path>
          </svg>
          <input 
            placeholder="Teléfono" 
            class="form-input" 
            type="text" 
            formControlName="telefono"
            [class.invalid]="telefonoInvalid"
          />
          <div *ngIf="telefonoInvalid" class="error-message">
            {{ getErrorMessage('telefono') }}
          </div>
        </div>

        <div class="input-wrapper">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24" class="input-icon"  fill="none"  stroke="currentColor"  stroke-width="1.5"  stroke-linecap="round"  stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" /><path d="M6 21v-2a4 4 0 0 1 4 -4h3.5" /><path d="M19 22v.01" /><path d="M19 19a2.003 2.003 0 0 0 .914 -3.782a1.98 1.98 0 0 0 -2.414 .483" /></svg>
          <select 
            class="form-input" 
            formControlName="puesto"
            [class.invalid]="puestoInvalid"
          >
            <option value="" disabled selected>Selecciona un puesto</option>
            <option value="Cajero">Cajero</option>
            <option value="Almacenista">Almacenista</option>
            <option value="Vendedor">Vendedor</option>
            <option value="Gerente">Gerente</option>
            <option value="Administrativo">Administrativo</option>
          </select>
          <div *ngIf="puestoInvalid" class="error-message">
            {{ getErrorMessage('puesto') }}
          </div>
        </div>

        <div class="input-wrapper">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="1.5"  stroke-linecap="round"  stroke-linejoin="round" class="input-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 16v-6a2 2 0 1 1 4 0v6" /><path d="M3 13h4" /><path d="M10 8v6a2 2 0 1 0 4 0v-1a2 2 0 1 0 -4 0v1" /><path d="M20.732 12a2 2 0 0 0 -3.732 1v1a2 2 0 0 0 3.726 1.01" /></svg>
          <input 
            placeholder="CURP" 
            class="form-input" 
            type="text" 
            formControlName="curp"
            [class.invalid]="curpInvalid"
          />
          <div *ngIf="curpInvalid" class="error-message">
            {{ getErrorMessage('curp') }}
          </div>
        </div>
      </div>

      <!-- Fila de NSS y RFC -->
      <div class="flex gap-12 mb-4">
        <div class="input-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25" class="input-icon">
            <path d="M4 6v-1a1 1 0 0 1 1 -1h1m5 0h2m5 0h1a1 1 0 0 1 1 1v1m0 5v2m0 5v1a1 1 0 0 1 -1 1h-1m-5 0h-2m-5 0h-1a1 1 0 0 1 -1 -1v-1m0 -5v-2m0 -5v-1"></path>
          </svg>
          <input 
            placeholder="NSS" 
            class="form-input" 
            type="text" 
            formControlName="nss"
            [class.invalid]="nssInvalid"
          />
          <div *ngIf="nssInvalid" class="error-message">
            {{ getErrorMessage('nss') }}
          </div>
        </div>

        <div class="input-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25" class="input-icon">
            <path d="M4 6v-1a1 1 0 0 1 1 -1h1m5 0h2m5 0h1a1 1 0 0 1 1 1v1m0 5v2m0 5v1a1 1 0 0 1 -1 1h-1m-5 0h-2m-5 0h-1a1 1 0 0 1 -1 -1v-1m0 -5v-2m0 -5v-1"></path>
          </svg>
          <input 
            placeholder="RFC" 
            class="form-input" 
            type="text" 
            formControlName="rfc"
            [class.invalid]="rfcInvalid"
          />
          <div *ngIf="rfcInvalid" class="error-message">
            {{ getErrorMessage('rfc') }}
          </div>
        </div>
      </div>

      <!-- Fila de Contraseña y Confirmar Contraseña -->
      <div class="flex gap-12">
        <div class="input-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25" class="input-icon">
            <path d="M12 12l8 -4.5"></path>
            <path d="M12 12v9"></path>
            <path d="M12 12l-8 -4.5"></path>
            <path d="M12 12l8 4.5"></path>
            <path d="M12 3v9"></path>
            <path d="M12 12l-8 4.5"></path>
          </svg>
          <input 
            placeholder="Contraseña" 
            class="form-input" 
            type="password" 
            formControlName="password"
            [class.invalid]="passwordInvalid"
          />
          
          <!-- Criterios de contraseña -->
          <div class="password-criteria mt-40">
            <div class="flex items-center">
              <span class="text-xs" [ngClass]="passwordLengthValid ? 'text-green-500' : 'text-red-500'">
                <svg *ngIf="passwordLengthValid" class="inline-block w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                <svg *ngIf="!passwordLengthValid" class="inline-block w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
                Entre 6 y 15 caracteres
              </span>
            </div>
            <div class="flex items-center">
              <span class="text-xs" [ngClass]="passwordNumberValid ? 'text-green-500' : 'text-red-500'">
                <svg *ngIf="passwordNumberValid" class="inline-block w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                <svg *ngIf="!passwordNumberValid" class="inline-block w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
                Al menos un número
              </span>
            </div>
            <div class="flex items-center">
              <span class="text-xs" [ngClass]="passwordSpecialCharValid ? 'text-green-500' : 'text-red-500'">
                <svg *ngIf="passwordSpecialCharValid" class="inline-block w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                <svg *ngIf="!passwordSpecialCharValid" class="inline-block w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
                Al menos un carácter especial ($!%*?&)
              </span>
            </div>
          </div>
          <div *ngIf="passwordInvalid" class="error-message">
            {{ getErrorMessage('password') }}
          </div>
        </div>

        <div class="input-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25" class="input-icon">
            <path d="M12 12l8 -4.5"></path>
            <path d="M12 12v9"></path>
            <path d="M12 12l-8 -4.5"></path>
            <path d="M12 12l8 4.5"></path>
            <path d="M12 3v9"></path>
            <path d="M12 12l-8 4.5"></path>
          </svg>
          <input 
            placeholder="Confirmar Contraseña" 
            class="form-input" 
            type="password" 
            formControlName="confirmPassword"
            [class.invalid]="confirmPasswordInvalid"
          />
          <div *ngIf="confirmPasswordInvalid" class="error-message">
            {{ getErrorMessage('confirmPassword') }}
          </div>
        </div>
      </div>

      <!-- Drop Zone para imagen -->
      <div class="drop-zone-container">
        <p class="drop-zone-label">Foto del empleado</p>
        <div class="drop-zone" (dragover)="onDragOver($event)" (drop)="onDrop($event)">
          <input type="file" id="fileInput" #fileInput accept="image/*" (change)="onFileSelected($event)" style="display: none;" />
          <div *ngIf="!previewImageUrl; else previewTemplate" class="upload-placeholder">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="40" height="40" stroke-width="1.25">
              <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"></path>
              <path d="M8.5 10a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"></path>
              <path d="m21 15-5-5L5 21"></path>
            </svg>
            <p>Arrastra y suelta una imagen aquí o</p>
            <label for="fileInput" class="upload-label">Selecciona una imagen</label>
          </div>
          <ng-template #previewTemplate>
            <div class="image-preview-container">
              <img [src]="previewImageUrl" alt="Vista previa" class="image-preview" />
              <button type="button" class="delete-image-button" (click)="deleteImage()">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="24" height="24" stroke-width="1.5">
                  <path d="M18 6L6 18M6 6l12 12"></path>
                </svg>
              </button>
            </div>
          </ng-template>
        </div>
      </div>

      <!-- Botones de acción -->
      <div class="button-row">
        <button type="button" class="button-secondary" (click)="onNoClick()">Cancelar</button>
        <button type="submit" class="button-primary" [disabled]="empleadoForm.invalid || isLoading">
          <span *ngIf="!isLoading">Guardar</span>
          <span *ngIf="isLoading" class="spinner"></span>
        </button>
      </div>
    </form>
  </div>
</div>