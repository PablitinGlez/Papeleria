<!-- Modal -->
<div class="modal">
  <div class="modal-content">
    <div class="title-modal"><h2>Agregar Usuario</h2>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25">
  <path d="M5 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"></path>
  <path d="M3 21v-2a4 4 0 0 1 4 -4h4c.96 0 1.84 .338 2.53 .901"></path>
  <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
  <path d="M16 19h6"></path>
  <path d="M19 16v6"></path>
</svg></div>
    
    <form [formGroup]="userForm" (ngSubmit)="guardarUsuario()">
      <!-- Fila de Nombre y Correo -->
      <div class="input-row">
        <!-- Campo de nombre -->
        <div class="input-wrapper">
            <svg  class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25">
  <path d="M3 17c3.333 -3.333 5 -6 5 -8c0 -3 -1 -3 -2 -3s-2.032 1.085 -2 3c.034 2.048 1.658 4.877 2.5 6c1.5 2 2.5 2.5 3.5 1l2 -3c.333 2.667 1.333 4 3 4c.53 0 2.639 -2 3 -2c.517 0 1.517 .667 3 2"></path>
</svg>
         
         <input 
            placeholder="Nombre" 
            class="form-input" 
            type="text" 
            formControlName="nombre"
            [class.invalid]="userForm.get('nombre')?.invalid && userForm.get('nombre')?.touched"
          />
         
        </div>

        <!-- Campo de correo electrónico -->
        <div class="input-wrapper">
          <svg fill="none" viewBox="0 0 24 24" class="input-icon">
            <path stroke-width="1.5" stroke="currentColor" d="M3 8L10.8906 13.2604C11.5624 13.7083 12.4376 13.7083 13.1094 13.2604L21 8M5 19H19C20.1046 19 21 18.1046 21 17V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V17C3 18.1046 3.89543 19 5 19Z"></path>
          </svg>
             <input 
            placeholder="Correo Electrónico" 
            class="form-input" 
            type="email" 
            formControlName="correo"
            [class.invalid]="userForm.get('correo')?.invalid && userForm.get('correo')?.touched"
          />

            <div class="error-message" *ngIf="userForm.get('correo')?.invalid && userForm.get('correo')?.touched">
            {{ getErrorMessage('correo') }}
          </div>
        </div>
      </div>

      <!-- Fila de Contraseña y Confirmar Contraseña -->
      <div class="input-row">
        <!-- Campo de contraseña -->
        <div class="input-wrapper">
         <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25"  class="input-icon">
  <path d="M12 12l8 -4.5"></path>
  <path d="M12 12v9"></path>
  <path d="M12 12l-8 -4.5"></path>
  <path d="M12 12l8 4.5"></path>
  <path d="M12 3v9"></path>
  <path d="M12 12l-8 4.5"></path>
</svg>
        <input placeholder="Contraseña" class="form-input" type="password" formControlName="password" required />
        </div>

        <!-- Campo de confirmar contraseña -->
        <div class="input-wrapper">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25"  class="input-icon">
  <path d="M12 12l8 -4.5"></path>
  <path d="M12 12v9"></path>
  <path d="M12 12l-8 -4.5"></path>
  <path d="M12 12l8 4.5"></path>
  <path d="M12 3v9"></path>
  <path d="M12 12l-8 4.5"></path>
</svg>
         <input placeholder="Confirmar Contraseña" class="form-input" type="password" formControlName="confirmPassword" required />
        </div>
      </div>

      <!-- Fila de Rol -->
      <div class="input-row">
        <!-- Campo de rol (desplegable) -->
        <div class="input-wrapper">
         <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25">
  <path d="M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3" ></path>
  <path d="M12 3v18"></path>
</svg>
        <select 
  class="form-input" 
  formControlName="idRol"
  [class.invalid]="userForm.get('idRol')?.invalid && userForm.get('idRol')?.touched"
>
  <option value="" disabled>Selecciona el Rol</option>
  <option *ngFor="let rol of roles" [value]="rol._id">{{ rol.nombre }}</option>
</select>
        </div>
          <!-- Campo de nombre -->
        <div class="input-wrapper">
           <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25"> <path d="M6 5a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2v-14z"></path> <path d="M11 4h2"></path> <path d="M12 17v.01"></path> </svg> 
         
        <input placeholder="Telefono" class="form-input" type="text" formControlName="telefono" required />

        </div>
           <!-- Drop zone -->
     
      </div>
     
   


<div class="input-rows">
    <!-- Contenedor de fecha y botones -->
    <div class="date-and-buttons">
        <!-- Input de fecha -->
<div class="input-wrapper">
    <svg fill="none" viewBox="0 0 24 24" class="input-icon">
      <path
        stroke-width="1.5"
        stroke="currentColor"
        d="M8 6H16C17.1046 6 18 6.89543 18 8V16C18 17.1046 17.1046 18 16 18H8C6.89543 18 6 17.1046 6 16V8C6 6.89543 6.89543 6 8 6Z"
      ></path>
    </svg>
    <input 
        type="date" 
        class="form-input" 
        formControlName="fechaNacimiento"
        required
        min="1900-01-01"
        max="2025-12-31"
    />
</div>

        <!-- Botones -->
        <div class="buttons">
               <button type="button" class="cancel-btn" (click)="onNoClick()">Cancelar</button>

             <button 
          type="submit" 
          class="save-btn"
          [disabled]="userForm.invalid || isLoading"
        >
          {{ isLoading ? 'Guardando...' : 'Guardar' }}
        </button>
        </div>
    </div>

    <!-- Drop zone -->
   
 <!-- Zona de carga con texto indicativo -->
  <div class="drop-zone-container">
    <p class="drop-zone-label">Imagen de perfil</p>
    <app-drop-zone-image  class="drop-zone" 
    (fileSelected)="onFileSelected($event)"></app-drop-zone-image>
  </div>
</div>

    </form>
  </div>
</div>
