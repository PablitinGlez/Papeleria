<div class="modal">
  <div class="modal-content">
    <div class="title-modal">
      <h2>Agregar Categoría</h2>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25">
        <path d="M5 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"></path>
        <path d="M3 21v-2a4 4 0 0 1 4 -4h4c.96 0 1.84 .338 2.53 .901"></path>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        <path d="M16 19h6"></path>
        <path d="M19 16v6"></path>
      </svg>
    </div>

    <form [formGroup]="categoriaForm" (ngSubmit)="guardarCategoria()">
      <!-- Fila de Nombre y Descripción -->
      <div class="input-row">
        <!-- Campo de nombre -->
        <div class="input-wrapper">
          <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25">
            <path d="M3 17c3.333 -3.333 5 -6 5 -8c0 -3 -1 -3 -2 -3s-2.032 1.085 -2 3c.034 2.048 1.658 4.877 2.5 6c1.5 2 2.5 2.5 3.5 1l2 -3c.333 2.667 1.333 4 3 4c.53 0 2.639 -2 3 -2c.517 0 1.517 .667 3 2"></path>
          </svg>
          <input
            placeholder="Nombre" 
            class="form-input" 
            type="text" 
            formControlName="nombre"
            [class.invalid]="nombreInvalid"
          />
          <div class="error-message" *ngIf="nombreInvalid">
            <span *ngIf="categoriaForm.get('nombre')?.errors?.['required']">El nombre es obligatorio</span>
            <span *ngIf="categoriaForm.get('nombre')?.errors?.['pattern']">Solo se permiten letras</span>
          </div>
        </div>

        <!-- Campo de descripción -->
        <div class="input-wrapper">
          <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25">
            <path d="M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3"></path>
            <path d="M12 3v18"></path>
          </svg>
          <textarea 
            placeholder="Descripción" 
            class="form-input" 
            formControlName="descripcion"
            [class.invalid]="descripcionInvalid"
            maxlength="130"
          ></textarea>
          <div class="error-message" *ngIf="descripcionInvalid">
            <span *ngIf="categoriaForm.get('descripcion')?.errors?.['required']">La descripción es obligatoria</span>
          </div>
        </div>
      </div>

      <!-- Fila de Estado -->
      <div class="input-row">
        <!-- Campo de estado -->
        <div class="input-wrapper">
          <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="28" height="28" stroke-width="1.25">
            <path d="M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3"></path>
            <path d="M12 3v18"></path>
          </svg>
          <select 
            class="form-input" 
            formControlName="estado"
            [class.invalid]="estadoInvalid"
          >
            <option value="" disabled>Selecciona el Estado</option>
            <option value="activo">Activo</option>
            <option value="inactivo">Inactivo</option>
          </select>
          <div class="error-message" *ngIf="estadoInvalid">
            <span *ngIf="categoriaForm.get('estado')?.errors?.['required']">El estado es obligatorio</span>
          </div>
        </div>
      </div>

      <!-- Botones -->
      <div class="buttons">
        <button type="button" class="cancel-btn" (click)="onNoClick()">Cancelar</button>
        <button type="submit" class="button-primary" [disabled]="categoriaForm.invalid || isLoading">
          <span *ngIf="!isLoading">Guardar</span>
          <span *ngIf="isLoading" class="spinner"></span>
        </button>
      </div>
    </form>
  </div>
</div>